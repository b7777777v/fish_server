# ğŸŸ Fish Server - æœªå®Œæˆé …ç›®ç¸½çµ

> æœ€å¾Œæ›´æ–°ï¼š2025-11-17
> åˆ†æç¯„åœï¼šä»£ç¢¼åº«å…¨é¢æƒæ + æ¸¬è©¦çµæœ + æ–‡æª”å¯©æŸ¥

---

## ğŸ“Š é …ç›®å®Œæˆåº¦æ¦‚è¦½

| é¡åˆ¥ | ç¸½æ•¸ | å·²å®Œæˆ | æœªå®Œæˆ | å®Œæˆåº¦ |
|------|------|--------|--------|--------|
| æ ¸å¿ƒåŠŸèƒ½æ¨¡çµ„ | 8 | 5 | 3 | 62.5% |
| æ¸¬è©¦è¦†è“‹ç‡ï¼ˆæ¥­å‹™å±¤ï¼‰ | 28 | 1 | 27 | 3.6% |
| æ¸¬è©¦è¦†è“‹ç‡ï¼ˆæ•¸æ“šå±¤ï¼‰ | 22 | 4 | 18 | 18.2% |
| API ç«¯é» | ~50 | ~45 | ~5 | 90% |
| æ–‡æª”å®Œæ•´æ€§ | 15 | 13 | 2 | 86.7% |

---

## ğŸ”´ Critical - ç·Šæ€¥éœ€è¦ä¿®å¾©ï¼ˆ5å€‹é …ç›®ï¼‰

### 1. é­šæ½®ç³»çµ± (Fish Tide System) - å®Œå…¨æœªå¯¦ç¾

**å½±éŸ¿ç¯„åœ**ï¼š3å€‹æ ¸å¿ƒæ–‡ä»¶
**ç‹€æ…‹**ï¼šâŒ å…¨éƒ¨ä½¿ç”¨ `panic()` æˆ–è¿”å› `NotImplemented`
**å„ªå…ˆç´š**ï¼šğŸ”´ æœ€é«˜

#### æ–‡ä»¶æ¸…å–®ï¼š

**a) `/internal/biz/game/fish_tide.go` (92è¡Œ)**
```go
// 4å€‹æ–¹æ³•ä½¿ç”¨ panic()
func (m *fishTideManager) StartTide()         // Line 66: panic
func (m *fishTideManager) StopTide()          // Line 75: panic
func (m *fishTideManager) GetActiveTide()     // Line 82: panic
func (m *fishTideManager) ScheduleTides()     // Line 91: panic
```

**TODO æ¨™è¨˜**ï¼š9è™•

**b) `/internal/data/postgres/fish_tide.go` (57è¡Œ)**
```go
// 5å€‹Repositoryæ–¹æ³•ä½¿ç”¨ panic()
func (r *fishTideRepo) GetTideByID()      // Line 28: panic
func (r *fishTideRepo) GetActiveTides()   // Line 35: panic
func (r *fishTideRepo) CreateTide()       // Line 42: panic
func (r *fishTideRepo) UpdateTide()       // Line 49: panic
func (r *fishTideRepo) DeleteTide()       // Line 56: panic
```

**TODO æ¨™è¨˜**ï¼š5è™•

**c) `/internal/app/admin/fish_tide_handlers.go` (112è¡Œ)**
```go
// 6å€‹HTTPè™•ç†å‡½æ•¸è¿”å› NotImplemented
func handleGetFishTides()      // Line 55: NotImplemented
func handleCreateFishTide()    // Line 63: NotImplemented
func handleUpdateFishTide()    // Line 73: NotImplemented
func handleDeleteFishTide()    // Line 85: NotImplemented
func handleStartFishTide()     // Line 95: NotImplemented
func handleStopFishTide()      // Line 106: NotImplemented
```

**TODO æ¨™è¨˜**ï¼š9è™•

**éœ€è¦å¯¦ç¾çš„åŠŸèƒ½**ï¼š
- [ ] é­šæ½®é…ç½®ç®¡ç†ï¼ˆå‰µå»ºã€æ›´æ–°ã€åˆªé™¤ï¼‰
- [ ] é­šæ½®è§¸ç™¼æ¢ä»¶ï¼ˆæ™‚é–“ã€äº‹ä»¶ã€ç©å®¶è¡Œç‚ºï¼‰
- [ ] é­šæ½®ç”Ÿæˆé‚è¼¯ï¼ˆå¤§é‡é­šç¾¤ã€ç‰¹æ®Šé­šç¨®ï¼‰
- [ ] é­šæ½®ç‹€æ…‹ç®¡ç†ï¼ˆé–‹å§‹ã€é€²è¡Œä¸­ã€çµæŸï¼‰
- [ ] é­šæ½®çå‹µè¨ˆç®—ï¼ˆå€ç‡åŠ æˆã€ç‰¹æ®Šçå‹µï¼‰
- [ ] æ•¸æ“šåº«æŒä¹…åŒ–ï¼ˆPostgreSQLï¼‰
- [ ] Admin API ç«¯é»ï¼ˆç®¡ç†å¾Œå°ï¼‰
- [ ] èˆ‡ FishSpawner æ•´åˆ
- [ ] å»£æ’­ç³»çµ±æ•´åˆï¼ˆé€šçŸ¥æ‰€æœ‰ç©å®¶ï¼‰

**ä¼°è¨ˆå·¥ä½œé‡**ï¼š3-5 å¤©

---

### 2. OAuth ç¬¬ä¸‰æ–¹ç™»éŒ„ç³»çµ± - å®Œå…¨æœªå¯¦ç¾

**å½±éŸ¿ç¯„åœ**ï¼š1å€‹æ–‡ä»¶
**ç‹€æ…‹**ï¼šâŒ æ‰€æœ‰æ–¹æ³•è¿”å› "not implemented"
**å„ªå…ˆç´š**ï¼šğŸ”´ é«˜

#### æ–‡ä»¶ï¼š`/internal/biz/account/oauth_service.go` (66è¡Œ)

**å•é¡Œ**ï¼š
- çµæ§‹é«”ç„¡ä»»ä½•å­—æ®µï¼ˆLine 27-32ï¼‰
- `GetUserInfo()` æ–¹æ³•å°æ‰€æœ‰å¹³å°è¿”å›éŒ¯èª¤ï¼ˆLine 43-65ï¼‰

```go
switch provider {
case "google":
    return nil, errors.New("google oauth not implemented")  // Line 51-53
case "facebook":
    return nil, errors.New("facebook oauth not implemented") // Line 54-57
case "qq":
    return nil, errors.New("qq oauth not implemented")      // Line 58-61
}
```

**TODO æ¨™è¨˜**ï¼š9è™•

**éœ€è¦å¯¦ç¾çš„åŠŸèƒ½**ï¼š
- [ ] Google OAuth 2.0 æ•´åˆ
- [ ] Facebook OAuth æ•´åˆ
- [ ] QQ OAuth æ•´åˆ
- [ ] OAuth é…ç½®ç®¡ç†ï¼ˆClient IDã€Secretï¼‰
- [ ] æˆæ¬Šç¢¼æµç¨‹ï¼ˆAuthorization Code Flowï¼‰
- [ ] Token äº¤æ›èˆ‡é©—è­‰
- [ ] ç”¨æˆ¶è³‡æ–™ç²å–èˆ‡æ˜ å°„
- [ ] ç¬¬ä¸‰æ–¹å¸³è™Ÿç¶å®š/è§£ç¶
- [ ] OAuth éŒ¯èª¤è™•ç†èˆ‡é‡è©¦

**ä¼°è¨ˆå·¥ä½œé‡**ï¼š2-4 å¤©ï¼ˆæ¯å€‹å¹³å° 0.5-1 å¤©ï¼‰

---

### 3. Admin API ç¼ºå°‘èº«ä»½é©—è­‰ - å®‰å…¨æ¼æ´

**å½±éŸ¿ç¯„åœ**ï¼šAdmin Server æ‰€æœ‰ API
**ç‹€æ…‹**ï¼šâš ï¸ ç„¡èº«ä»½é©—è­‰ä¿è­·
**å„ªå…ˆç´š**ï¼šğŸ”´ å®‰å…¨é¢¨éšª

#### æ–‡ä»¶ï¼š`/internal/app/admin/lobby_handlers.go`

```go
// Line 41: TODO: æ·»åŠ ç®¡ç†å“¡èªè­‰ä¸­é–“ä»¶
func RegisterLobbyRoutes(r *gin.Engine, handlers *LobbyHandlers) {
    lobby := r.Group("/admin/lobby")
    // æ²’æœ‰ä»»ä½•èº«ä»½é©—è­‰ï¼
    lobby.GET("/rooms", handlers.GetAllRooms)
    lobby.POST("/rooms/:id/close", handlers.CloseRoom)
    // ...
}
```

**å®‰å…¨é¢¨éšª**ï¼š
- âŒ ä»»ä½•äººéƒ½å¯ä»¥èª¿ç”¨ç®¡ç† API
- âŒ å¯ä»¥å‰µå»º/åˆªé™¤æˆ¿é–“
- âŒ å¯ä»¥ä¿®æ”¹ç©å®¶éŒ¢åŒ…é¤˜é¡
- âŒ å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç©å®¶è³‡æ–™
- âŒ å¯ä»¥å•Ÿå‹•/åœæ­¢é­šæ½®

**éœ€è¦å¯¦ç¾çš„åŠŸèƒ½**ï¼š
- [ ] Admin JWT èªè­‰ä¸­é–“ä»¶
- [ ] Admin è§’è‰²æ¬Šé™ç®¡ç†ï¼ˆRBACï¼‰
- [ ] Admin å¸³è™Ÿç®¡ç†ç³»çµ±
- [ ] API è¨ªå•æ—¥èªŒè¨˜éŒ„
- [ ] é€Ÿç‡é™åˆ¶ï¼ˆRate Limitingï¼‰
- [ ] IP ç™½åå–®æ©Ÿåˆ¶ï¼ˆå¯é¸ï¼‰

**ä¼°è¨ˆå·¥ä½œé‡**ï¼š1-2 å¤©

---

### 4. æ¸¬è©¦æ¶æ§‹ç¼ºé™· - Mock æ³¨å…¥å¤±æ•—

**å½±éŸ¿ç¯„åœ**ï¼šAdmin Server å–®å…ƒæ¸¬è©¦
**ç‹€æ…‹**ï¼šâŒ æ¸¬è©¦ç„¡æ³•é‹è¡Œ
**å„ªå…ˆç´š**ï¼šğŸ”´ é«˜

#### æ–‡ä»¶æ¸…å–®ï¼š

**a) `/internal/app/admin/handlers_test.go`**
```go
// Line 109-110
handlers := &Handlers{
    playerUC: nil,  // TODO: å¦‚æœéœ€è¦æ¸¬è©¦ player ç›¸é—œåŠŸèƒ½ï¼Œéœ€è¦è¨­ç½®
    walletUC: nil,  // TODO: éœ€è¦é‡æ–°è¨­è¨ˆæ¸¬è©¦æ¶æ§‹ä¾†æ”¯æŒ mock injection
}
```

**b) `/internal/app/admin/business_handlers_test.go`**
```go
// Line 4: TODO: These tests require proper mock injection architecture
// Line 26: t.Skip("TODO: Refactor test architecture...")
```

**æ¸¬è©¦å¤±æ•—æ¸…å–®**ï¼ˆä¾†è‡ªæ¸¬è©¦çµæœï¼‰ï¼š
```
FAIL: TestGameUsecase_EdgeCases
FAIL: TestInventoryManager_AddWin
FAIL: TestInventoryManager_RTPCalculation
FAIL: TestInventoryManager_GetInventory
FAIL: TestInventoryManager_EdgeCases
FAIL: TestRoomManager_GetRoomList
```

**éœ€è¦å¯¦ç¾çš„åŠŸèƒ½**ï¼š
- [ ] é‡æ§‹æ¸¬è©¦æ¶æ§‹æ”¯æŒä¾è³´æ³¨å…¥
- [ ] å‰µå»º Mock ç”Ÿæˆå·¥å…·ï¼ˆä½¿ç”¨ mockery æˆ– gomockï¼‰
- [ ] ä¿®å¾©æ‰€æœ‰å¤±æ•—çš„æ¸¬è©¦
- [ ] æ·»åŠ æ¸¬è©¦å·¥å…·å‡½æ•¸ï¼ˆtest helpersï¼‰
- [ ] å‰µå»ºæ¸¬è©¦æ•¸æ“šå·¥å» ï¼ˆtest fixturesï¼‰

**ä¼°è¨ˆå·¥ä½œé‡**ï¼š2-3 å¤©

---

### 5. å¤§å»³æ¨¡å¡Š Repository æ¥å£ç„¡å¯¦ç¾

**å½±éŸ¿ç¯„åœ**ï¼šå¤§å»³ç³»çµ±æ•¸æ“šè¨ªå•å±¤
**ç‹€æ…‹**ï¼šâš ï¸ åªæœ‰æ¥å£å®šç¾©ï¼Œç„¡å¯¦ç¾
**å„ªå…ˆç´š**ï¼šğŸ”´ ä¸­é«˜

#### æ–‡ä»¶ï¼š`/internal/biz/lobby/repository.go` (~50è¡Œ)

```go
// Line 7: TODO: å¯¦ç¾å¤§å»³è³‡æ–™è¨ªå•å±¤ä»‹é¢
type LobbyRepository interface {
    // æ¥å£å·²å®šç¾©ï¼Œä½†ç„¡å¯¦ç¾é¡
}
```

**æ³¨æ„**ï¼š
- âœ… PostgreSQL å¯¦ç¾å·²å®Œæˆï¼ˆ`/internal/data/postgres/lobby.go`ï¼‰
- âœ… Redis å¿«å–å¯¦ç¾å·²å®Œæˆï¼ˆ`/internal/data/redis/lobby.go`ï¼‰
- âœ… UseCase æ¥­å‹™é‚è¼¯å·²å®Œæˆï¼ˆ`/internal/biz/lobby/usecase.go`ï¼‰
- âŒ ä½†æ¥å£å®šç¾©æ–‡ä»¶æ¨™è¨˜ç‚º TODOï¼ˆå¯èƒ½åªæ˜¯æ–‡æª”å•é¡Œï¼‰

**éœ€è¦ç¢ºèª**ï¼š
- [ ] æª¢æŸ¥æ˜¯å¦çœŸçš„ç¼ºå°‘å¯¦ç¾
- [ ] å¦‚æœå·²å¯¦ç¾ï¼Œç§»é™¤ TODO æ¨™è¨˜
- [ ] å¦‚æœæœªå¯¦ç¾ï¼Œè£œå……å¯¦ç¾ä»£ç¢¼

**ä¼°è¨ˆå·¥ä½œé‡**ï¼š0.5-1 å¤©ï¼ˆæˆ–åªéœ€ç§»é™¤ TODOï¼‰

---

## ğŸŸ¡ High - é‡è¦ä½†éç·Šæ€¥ï¼ˆ6å€‹é …ç›®ï¼‰

### 6. å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡æ¥µä½

#### æ¥­å‹™é‚è¼¯å±¤ï¼ˆinternal/biz/ï¼‰

**çµ±è¨ˆ**ï¼š
- ç¸½æ–‡ä»¶ï¼š28 å€‹ï¼ˆä¸å« *_test.goï¼‰
- æœ‰æ¸¬è©¦ï¼š1 å€‹ï¼ˆgame_test.goï¼‰
- **æ¸¬è©¦è¦†è“‹ç‡ï¼š3.6%**

**ç„¡æ¸¬è©¦çš„é—œéµæ¨¡å¡Š**ï¼š

**a) å¸³è™Ÿæ¨¡å¡Šï¼ˆ3å€‹æ–‡ä»¶ï¼‰**
```
internal/biz/account/usecase.go
â”œâ”€â”€ Register()         // ç”¨æˆ¶è¨»å†Š
â”œâ”€â”€ Login()            // ç”¨æˆ¶ç™»éŒ„
â”œâ”€â”€ GuestLogin()       // éŠå®¢ç™»éŒ„
â””â”€â”€ OAuthLogin()       // ç¬¬ä¸‰æ–¹ç™»éŒ„

internal/biz/account/repository.go     // æ¥å£å®šç¾©
internal/biz/account/oauth_service.go  // OAuth æœå‹™
```

**b) å¤§å»³æ¨¡å¡Šï¼ˆ2å€‹æ–‡ä»¶ï¼‰**
```
internal/biz/lobby/usecase.go
â”œâ”€â”€ GetRoomList()      // ç²å–æˆ¿é–“åˆ—è¡¨
â”œâ”€â”€ GetPlayerStatus()  // ç²å–ç©å®¶ç‹€æ…‹
â””â”€â”€ ...

internal/biz/lobby/repository.go       // æ¥å£å®šç¾©
```

**c) ç©å®¶æ¨¡å¡Šï¼ˆ2å€‹æ–‡ä»¶ï¼‰**
```
internal/biz/player/usecase.go         // ç©å®¶æ¥­å‹™é‚è¼¯
internal/biz/player/player.go          // ç©å®¶å¯¦é«”
```

**d) éŒ¢åŒ…æ¨¡å¡Šï¼ˆ2å€‹æ–‡ä»¶ï¼‰**
```
internal/biz/wallet/usecase.go
â”œâ”€â”€ Deposit()          // å……å€¼
â”œâ”€â”€ Withdraw()         // æç¾
â”œâ”€â”€ Transfer()         // è½‰å¸³
â””â”€â”€ ...

internal/biz/wallet/wallet.go          // éŒ¢åŒ…å¯¦é«”
```

**e) éŠæˆ²æ¨¡å¡Šï¼ˆ15+å€‹æ–‡ä»¶ï¼‰**
```
internal/biz/game/spawner.go           // é­šé¡ç”Ÿæˆ
internal/biz/game/fish_formation.go    // é­šç¾¤é™£å‹
internal/biz/game/fish_routes.go       // é­šé¡è·¯ç·š
internal/biz/game/room.go              // æˆ¿é–“ç®¡ç†
internal/biz/game/entities.go          // å¯¦é«”å®šç¾©
internal/biz/game/rtp_controller.go    // RTP æ§åˆ¶å™¨
internal/biz/game/inventory_manager.go // åº«å­˜ç®¡ç†å™¨
... å…¶ä»– 10+ æ–‡ä»¶ç„¡æ¸¬è©¦
```

**éœ€è¦æ·»åŠ çš„æ¸¬è©¦**ï¼š
- [ ] å¸³è™Ÿæ¨¡å¡Šå–®å…ƒæ¸¬è©¦ï¼ˆRegister, Login, Guest, OAuthï¼‰
- [ ] å¤§å»³æ¨¡å¡Šå–®å…ƒæ¸¬è©¦ï¼ˆRoom List, Player Statusï¼‰
- [ ] ç©å®¶æ¨¡å¡Šå–®å…ƒæ¸¬è©¦
- [ ] éŒ¢åŒ…æ¨¡å¡Šå–®å…ƒæ¸¬è©¦ï¼ˆDeposit, Withdraw, Transferï¼‰
- [ ] éŠæˆ²æ¨¡å¡Šå–®å…ƒæ¸¬è©¦ï¼ˆSpawner, Formation, Routes, Roomï¼‰
- [ ] RTP æ§åˆ¶å™¨æ¸¬è©¦
- [ ] åº«å­˜ç®¡ç†å™¨æ¸¬è©¦

**ä¼°è¨ˆå·¥ä½œé‡**ï¼š5-10 å¤©

---

#### æ•¸æ“šè¨ªå•å±¤ï¼ˆinternal/data/ï¼‰

**çµ±è¨ˆ**ï¼š
- ç¸½æ–‡ä»¶ï¼š22 å€‹
- æœ‰æ¸¬è©¦ï¼š4 å€‹
- **æ¸¬è©¦è¦†è“‹ç‡ï¼š18.2%**

**ç„¡æ¸¬è©¦çš„æ–‡ä»¶ï¼ˆ18å€‹ï¼‰**ï¼š
```
1. formation_config_repo.go        // é™£å‹é…ç½® Repository
2. game_repo.go                    // éŠæˆ² Repository
3. inventory_repo.go               // åº«å­˜ Repository
4. lobby_repos.go                  // å¤§å»³ Repository
5. player_repo.go                  // ç©å®¶ Repository
6. room_config_repo.go             // æˆ¿é–“é…ç½® Repository
7. postgres/account.go             // âœ… å·²å¯¦ç¾ä½†ç„¡æ¸¬è©¦
8. postgres/fish_tide.go           // âŒ æœªå¯¦ç¾
9. postgres/lobby.go               // âœ… å·²å¯¦ç¾ä½†ç„¡æ¸¬è©¦
10. postgres/room_config.go        // æˆ¿é–“é…ç½® PostgreSQL
11. redis/lobby.go                 // âœ… å·²å¯¦ç¾ä½†ç„¡æ¸¬è©¦
12. redis/token_cache.go           // Token å¿«å–
13. redis/room_config.go           // æˆ¿é–“é…ç½® Redis
... å…¶ä»– 5 å€‹æ–‡ä»¶
```

**éœ€è¦æ·»åŠ çš„æ¸¬è©¦**ï¼š
- [ ] Repository å–®å…ƒæ¸¬è©¦ï¼ˆä½¿ç”¨ sqlmockï¼‰
- [ ] Redis å¿«å–æ¸¬è©¦ï¼ˆä½¿ç”¨ miniredisï¼‰
- [ ] é›†æˆæ¸¬è©¦ï¼ˆä½¿ç”¨æ¸¬è©¦æ•¸æ“šåº«ï¼‰
- [ ] äº‹å‹™æ¸¬è©¦ï¼ˆTransactionï¼‰
- [ ] ä¸¦ç™¼æ¸¬è©¦ï¼ˆConcurrencyï¼‰

**ä¼°è¨ˆå·¥ä½œé‡**ï¼š3-5 å¤©

---

### 7. ç¡¬ç·¨ç¢¼å€¼å’Œé­”è¡“æ•¸å­—

#### a) `/internal/app/game/message_handler.go`

```go
// Line 86: ç¡¬ç·¨ç¢¼çš„å­å½ˆç™¼å°„ä½ç½®
position := game.Position{X: 600, Y: 750} // é»˜èªä½ç½®
```

**å•é¡Œ**ï¼š
- æ‡‰è©²å¾å®¢æˆ¶ç«¯è«‹æ±‚ç²å–
- æˆ–å¾é…ç½®æ–‡ä»¶è®€å–
- æˆ–å¾ç©å®¶ç•¶å‰åº§ä½è¨ˆç®—

**éœ€è¦ä¿®å¾©**ï¼š
- [ ] å¾å®¢æˆ¶ç«¯æ¶ˆæ¯ç²å–ç™¼å°„ä½ç½®
- [ ] é©—è­‰ä½ç½®æ˜¯å¦åœ¨åˆæ³•ç¯„åœå…§
- [ ] æ·»åŠ éŒ¯èª¤è™•ç†

---

#### b) `/internal/app/game/hub.go`

```go
// Line 104-109: ç¡¬ç·¨ç¢¼çš„é€šé“ç·©è¡å€å¤§å°
h := &Hub{
    register:   make(chan *Client, 10),
    unregister: make(chan *Client, 10),
    joinRoom:   make(chan *JoinRoomMessage, 10),
    leaveRoom:  make(chan *LeaveRoomMessage, 10),
    gameAction: make(chan *GameActionMessage, 100),
    broadcast:  make(chan *BroadcastMessage, 100),
}
```

**å•é¡Œ**ï¼š
- é­”è¡“æ•¸å­— 10 å’Œ 100
- ç„¡æ³•æ ¹æ“šè² è¼‰èª¿æ•´
- ç¼ºå°‘é…ç½®éˆæ´»æ€§

**éœ€è¦ä¿®å¾©**ï¼š
- [ ] æå–ç‚ºé…ç½®å¸¸é‡
- [ ] ç§»è‡³é…ç½®æ–‡ä»¶
- [ ] æ·»åŠ æ–‡æª”èªªæ˜é¸æ“‡åŸå› 

---

### 8. æ€§èƒ½å„ªåŒ– - ç¼ºå°‘å¿«å–

#### æ–‡ä»¶ï¼š`/internal/data/wallet_repo.go` (17,764è¡Œ - è¶…å¤§æ–‡ä»¶ï¼)

```go
// Line 375: TODO: [Cache] Caching transaction history can improve performance
//                  for frequently accessed pages.

// Line 380: ç„¡å¿«å–å¯¦ç¾
func (r *walletRepo) FindTransactionsByWalletID(
    ctx context.Context,
    walletID int64,
    limit, offset int,
) ([]Transaction, error) {
    // ç›´æ¥æŸ¥è©¢æ•¸æ“šåº«ï¼Œç„¡å¿«å–
    query := `SELECT * FROM transactions WHERE wallet_id = $1 LIMIT $2 OFFSET $3`
    // ...
}
```

**æ€§èƒ½å•é¡Œ**ï¼š
- äº¤æ˜“æ­·å²ç¶“å¸¸è¢«è¨ªå•ï¼ˆç©å®¶æŸ¥çœ‹è¨˜éŒ„ï¼‰
- æ¯æ¬¡éƒ½æŸ¥è©¢æ•¸æ“šåº«
- é«˜ä¸¦ç™¼æ™‚å¯èƒ½æˆç‚ºç“¶é ¸

**éœ€è¦å¯¦ç¾**ï¼š
- [ ] å¯¦ç¾ Redis å¿«å–å±¤
- [ ] è¨­ç½®åˆç†çš„ TTLï¼ˆ1-2åˆ†é˜ï¼‰
- [ ] å¿«å–å¤±æ•ˆç­–ç•¥ï¼ˆæ–°äº¤æ˜“æ™‚æ¸…é™¤ï¼‰
- [ ] å¿«å–é ç†±ï¼ˆç†±é»æ•¸æ“šï¼‰
- [ ] ç›£æ§å¿«å–å‘½ä¸­ç‡

**ä¼°è¨ˆå·¥ä½œé‡**ï¼š1-2 å¤©

---

### 9. æˆ¿é–“åº§ä½é¸æ“‡åŠŸèƒ½è¢«è¨»é‡‹

#### æ–‡ä»¶ï¼š`/internal/app/game/room_manager.go`

```go
// Line 383: TODO: Uncomment after running `make proto` to enable seat selection requirement

// åº§ä½é¸æ“‡åŠŸèƒ½è¢«ç¦ç”¨
// if req.SeatNumber != nil {
//     seatNum := *req.SeatNumber
//     if seatNum < 0 || seatNum >= 4 {
//         return nil, errors.New("invalid seat number")
//     }
//     // ...
// }
```

**åŸå› **ï¼š
- Protobuf å®šç¾©ä¸­å¯èƒ½ç¼ºå°‘ `SeatNumber` å­—æ®µ
- éœ€è¦é‡æ–°ç”Ÿæˆ Protobuf ä»£ç¢¼

**éœ€è¦ä¿®å¾©**ï¼š
- [ ] æª¢æŸ¥ `api/proto/v1/game.proto` ä¸­çš„åº§ä½å­—æ®µå®šç¾©
- [ ] é‹è¡Œ `make proto` é‡æ–°ç”Ÿæˆä»£ç¢¼
- [ ] å–æ¶ˆè¨»é‡‹åº§ä½é¸æ“‡é‚è¼¯
- [ ] æ·»åŠ åº§ä½è¡çªæª¢æ¸¬
- [ ] æ·»åŠ åº§ä½é ç•™æ©Ÿåˆ¶

**ä¼°è¨ˆå·¥ä½œé‡**ï¼š0.5-1 å¤©

---

### 10. éŒ¯èª¤çš„ TODO æ¨™è¨˜ï¼ˆå·²å¯¦ç¾ä½†æ¨™è¨˜ç‚ºæœªå®Œæˆï¼‰

#### éœ€è¦ç§»é™¤ TODO çš„æ–‡ä»¶ï¼ˆ3å€‹ï¼‰ï¼š

**a) `/internal/data/postgres/account.go` (195è¡Œ)**
```go
// Line 11: TODO: å¯¦ç¾å¸³è™Ÿè³‡æ–™åº«è¨ªå•å±¤
// ä½†å¯¦éš›ä¸Šå·²ç¶“å®Œæ•´å¯¦ç¾ï¼š
// âœ… CreateUser() - Line 27-55
// âœ… GetUserByUsername() - Line 58-96
// âœ… GetUserByID() - Line 99-135
// âœ… GetUserByThirdParty() - Line 138-174
// âœ… UpdateUser() - Line 177-194
```

**b) `/internal/biz/lobby/usecase.go` (165è¡Œ)**
```go
// Line 8: TODO: å¯¦ç¾å¤§å»³æ¨¡çµ„çš„æ¥­å‹™é‚è¼¯
// ä½†å¯¦éš›ä¸Šå·²ç¶“å®Œæ•´å¯¦ç¾æ‰€æœ‰æ¥­å‹™æ–¹æ³•
```

**c) `/internal/data/redis/lobby.go` (80è¡Œ)**
```go
// Line 12: TODO: å¯¦ç¾å¤§å»³ Redis å¿«å–å±¤
// ä½†å¯¦éš›ä¸Šå·²ç¶“å®Œæ•´å¯¦ç¾å¿«å–é‚è¼¯
```

**éœ€è¦åšçš„**ï¼š
- [ ] ç§»é™¤é€™äº›èª¤å°æ€§çš„ TODO æ¨™è¨˜
- [ ] æ›´æ–°ä»£ç¢¼è¨»é‡‹ç‚ºå¯¦ç¾èªªæ˜
- [ ] æ·»åŠ åŠŸèƒ½æ–‡æª”

**ä¼°è¨ˆå·¥ä½œé‡**ï¼š0.5 å°æ™‚

---

### 11. ä¸¦ç™¼é–çš„å„ªé›…æ€§å•é¡Œ

#### æ–‡ä»¶ï¼š`/internal/app/game/hub.go`

```go
// Line 298-303: é¡¯å¼çš„é–é‡‹æ”¾/é‡æ–°ç²å–
h.mu.Unlock()
h.broadcastToRoom(roomID, playerJoinMsg, client)
h.mu.Lock() // é‡æ–°ç²å–é–
```

**å•é¡Œ**ï¼š
- å®¹æ˜“å°è‡´æ­»é–
- é›£ä»¥ç¶­è­·
- å¯èƒ½å¿˜è¨˜é‡æ–°ç²å–é–
- ä¸ç¬¦åˆ Go æœ€ä½³å¯¦è¸

**éœ€è¦é‡æ§‹**ï¼š
- [ ] ä½¿ç”¨æ¢ä»¶è®Šé‡ï¼ˆsync.Condï¼‰
- [ ] æˆ–ä½¿ç”¨é€šé“ï¼ˆchannelï¼‰ä¾†å”èª¿
- [ ] æˆ–å°‡å»£æ’­æ“ä½œç§»è‡³é–å¤–åŸ·è¡Œ
- [ ] æ·»åŠ ä¸¦ç™¼æ¸¬è©¦

**ä¼°è¨ˆå·¥ä½œé‡**ï¼š1-2 å¤©

---

## ğŸŸ  Medium - æ”¹é€²å»ºè­°ï¼ˆ12å€‹é …ç›®ï¼‰

### 12. å°ˆæ¡ˆç›®æ¨™èˆ‡å„ªå…ˆç´šï¼ˆä¾†è‡ª CLAUDE.mdï¼‰

#### çŸ­æœŸç›®æ¨™ï¼ˆ4å€‹ï¼‰

- [ ] **å®Œå–„éŠæˆ²æ ¸å¿ƒé‚è¼¯**
  - å­å½ˆç¢°æ’æª¢æ¸¬å„ªåŒ–
  - é­šç¾¤è·¯å¾‘å¹³æ»‘è™•ç†
  - çå‹µè¨ˆç®—å…¬å¼èª¿æ•´

- [ ] **å„ªåŒ–é­šç¾¤ç”Ÿæˆæ¼”ç®—æ³•**
  - æ¸›å°‘ CPU ä½¿ç”¨ç‡
  - å„ªåŒ–é™£å‹è¨ˆç®—
  - è·¯ç·šç”Ÿæˆæ€§èƒ½æå‡

- [ ] **æå‡ WebSocket æ•ˆèƒ½**
  - æ¶ˆæ¯æ‰¹é‡è™•ç†
  - å£“ç¸®å¤§å‹æ¶ˆæ¯
  - é€£æ¥æ± ç®¡ç†

- [ ] **å¢åŠ å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡**
  - ç›®æ¨™ï¼š> 80%
  - é‡é»ï¼šæ¥­å‹™é‚è¼¯å±¤
  - å·¥å…·ï¼štestify + mockery

---

#### ä¸­æœŸç›®æ¨™ï¼ˆ4å€‹ï¼‰

- [ ] **å¯¦ä½œæ’è¡Œæ¦œç³»çµ±**
  - æ¯æ—¥æ’è¡Œæ¦œ
  - æ¯é€±æ’è¡Œæ¦œ
  - æ­·å²æœ€é«˜åˆ†
  - Redis Sorted Set å¯¦ç¾

- [ ] **æ·»åŠ æ›´å¤šé­šç¨®å’Œ BOSS**
  - ç‰¹æ®ŠæŠ€èƒ½é­šï¼ˆåŠ é€Ÿã€è¿´é¿ï¼‰
  - BOSS é­šæ©Ÿåˆ¶ï¼ˆå¤šéšæ®µã€æŠ€èƒ½ï¼‰
  - ç¨€æœ‰é­šç¨®ï¼ˆé«˜çå‹µã€ä½å‡ºç¾ç‡ï¼‰
  - å‹•ç•«å’Œç‰¹æ•ˆæ”¯æŒ

- [ ] **å¯¦ä½œç©å®¶æˆå°±ç³»çµ±**
  - æˆå°±å®šç¾©å’Œé…ç½®
  - é€²åº¦è¿½è¹¤
  - çå‹µç™¼æ”¾
  - æˆå°±å±•ç¤º

- [ ] **å„ªåŒ–å‰ç«¯æ¸²æŸ“æ•ˆèƒ½**
  - å°è±¡æ± ï¼ˆObject Poolï¼‰
  - é›¢å±æ¸²æŸ“ï¼ˆOff-screen Canvasï¼‰
  - åœ–ç‰‡ç²¾éˆï¼ˆSprite Sheetï¼‰
  - é™ä½ç¹ªè£½å‘¼å«æ¬¡æ•¸

---

#### é•·æœŸç›®æ¨™ï¼ˆ4å€‹ï¼‰

- [ ] **æ”¯æ´æ°´å¹³æ“´å±•ï¼ˆå¤šä¼ºæœå™¨ï¼‰**
  - ç„¡ç‹€æ…‹è¨­è¨ˆ
  - Redis å…±äº«æœƒè©±
  - gRPC æœå‹™é–“é€šè¨Š
  - è² è¼‰å‡è¡¡ï¼ˆNginx/HAProxyï¼‰

- [ ] **å¯¦ä½œè§€æˆ°æ¨¡å¼**
  - è§€çœ¾é€£æ¥ç®¡ç†
  - åªè®€æ¶ˆæ¯å»£æ’­
  - å»¶é²æ§åˆ¶ï¼ˆé˜²ä½œå¼Šï¼‰
  - è§€çœ¾èŠå¤©å®¤

- [ ] **æ·»åŠ éŒ„åƒå›æ”¾åŠŸèƒ½**
  - éŠæˆ²ç‹€æ…‹è¨˜éŒ„
  - äº‹ä»¶åºåˆ—åŒ–
  - å›æ”¾æ’­æ”¾å™¨
  - é€Ÿåº¦æ§åˆ¶ï¼ˆ0.5x, 1x, 2xï¼‰

- [ ] **å¯¦ä½œ AI ç©å®¶**
  - è¡Œç‚ºæ¨¹ï¼ˆBehavior Treeï¼‰
  - é›£åº¦ç­‰ç´š
  - å­¸ç¿’ç®—æ³•ï¼ˆå¯é¸ï¼‰
  - çœŸå¯¦ç©å®¶è¡Œç‚ºæ¨¡æ“¬

---

### 13. æ¶æ§‹æ”¹é€²å»ºè­°

#### a) Hub å’Œ RoomManager çš„ç·Šè€¦åˆ

```go
// internal/app/game/hub.go Line 259-262
if h.roomManagers[roomID] == nil {
    roomManager := NewRoomManager(roomID, h.gameUsecase, h, h.logger)
    h.roomManagers[roomID] = roomManager
    go roomManager.Run()
}
```

**å•é¡Œ**ï¼š
- Hub ç›´æ¥å‰µå»ºå’Œç®¡ç† RoomManager
- æ¸¬è©¦å›°é›£
- é›£ä»¥æ›¿æ›å¯¦ç¾

**æ”¹é€²å»ºè­°**ï¼š
- [ ] ä½¿ç”¨å·¥å» æ¨¡å¼
- [ ] ä½¿ç”¨ä¾è³´æ³¨å…¥ï¼ˆWireï¼‰
- [ ] å®šç¾©æ¸…æ™°çš„æ¥å£

---

#### b) äº‹ä»¶é©…å‹•æ¶æ§‹ç¼ºå¤±

**ç•¶å‰ç‹€æ…‹**ï¼š
- ä½¿ç”¨ç›´æ¥æ–¹æ³•èª¿ç”¨
- æ¨¡å¡Šé–“ç·Šè€¦åˆ
- é›£ä»¥æ“´å±•

**æ”¹é€²å»ºè­°**ï¼š
- [ ] å¯¦ç¾äº‹ä»¶ç¸½ç·šï¼ˆEvent Busï¼‰
- [ ] å®šç¾©éŠæˆ²äº‹ä»¶ï¼ˆPlayerJoined, FishSpawned, BulletFiredï¼‰
- [ ] è§£è€¦æ¨¡å¡Šä¾è³´
- [ ] æ”¯æŒç•°æ­¥è™•ç†

---

#### c) ä¸­é–“ä»¶ç¼ºå¤±

**ç•¶å‰ç‹€æ…‹**ï¼š
- æ—¥èªŒè¨˜éŒ„ä¸å®Œæ•´
- ç¼ºå°‘é€Ÿç‡é™åˆ¶
- ç¼ºå°‘è«‹æ±‚è¿½è¹¤

**æ”¹é€²å»ºè­°**ï¼š
- [ ] çµæ§‹åŒ–æ—¥èªŒä¸­é–“ä»¶ï¼ˆslogï¼‰
- [ ] é€Ÿç‡é™åˆ¶ä¸­é–“ä»¶ï¼ˆRate Limitingï¼‰
- [ ] è«‹æ±‚ ID è¿½è¹¤ï¼ˆRequest IDï¼‰
- [ ] æ€§èƒ½ç›£æ§ä¸­é–“ä»¶ï¼ˆMetricsï¼‰
- [ ] éŒ¯èª¤æ¢å¾©ä¸­é–“ä»¶ï¼ˆRecoveryï¼‰

---

### 14. æ•¸æ“šåº«ç›¸é—œ

#### a) è®€å¯«åˆ†é›¢æ”¯æŒ

**ç•¶å‰ç‹€æ…‹**ï¼š
- å–®ä¸€æ•¸æ“šåº«é€£æ¥
- æ‰€æœ‰æ“ä½œéƒ½èµ°ä¸»åº«

**æ”¹é€²å»ºè­°**ï¼š
- [ ] é…ç½®ä¸»å¾è¤‡è£½
- [ ] è®€æ“ä½œè·¯ç”±åˆ°å¾åº«
- [ ] å¯«æ“ä½œè·¯ç”±åˆ°ä¸»åº«
- [ ] å¾åº«æ•…éšœåˆ‡æ›

**åƒè€ƒæ–‡æª”**ï¼š`docs/DATABASE_READ_WRITE_SEPARATION.md`

---

#### b) é€£æ¥æ± å„ªåŒ–

**éœ€è¦èª¿æ•´**ï¼š
- [ ] MaxOpenConns - æ ¹æ“šæœå‹™å™¨é…ç½®èª¿æ•´
- [ ] MaxIdleConns - ä¿æŒè¶³å¤ çš„ç©ºé–’é€£æ¥
- [ ] ConnMaxLifetime - é˜²æ­¢é€£æ¥æ´©æ¼
- [ ] ç›£æ§é€£æ¥æ± æŒ‡æ¨™

---

### 15. WebSocket å¢å¼·

#### a) å¿ƒè·³æ©Ÿåˆ¶

**ç•¶å‰ç‹€æ…‹**ï¼š
- åŸºæœ¬å¿ƒè·³å¯¦ç¾
- ç„¡è‡ªå‹•é‡é€£

**æ”¹é€²å»ºè­°**ï¼š
- [ ] å®¢æˆ¶ç«¯è‡ªå‹•é‡é€£
- [ ] æ–·ç·šé‡é€£å¾Œç‹€æ…‹æ¢å¾©
- [ ] å„ªé›…é—œé–‰ï¼ˆGraceful Shutdownï¼‰
- [ ] é€£æ¥å¥åº·æª¢æŸ¥

---

#### b) æ¶ˆæ¯å£“ç¸®

**ç•¶å‰ç‹€æ…‹**ï¼š
- ä½¿ç”¨ Protobufï¼ˆå·²ç¶“å¾ˆç·Šæ¹Šï¼‰
- ç„¡é¡å¤–å£“ç¸®

**æ”¹é€²å»ºè­°**ï¼ˆä½å„ªå…ˆç´šï¼‰ï¼š
- [ ] å°å¤§å‹æ¶ˆæ¯å•Ÿç”¨ GZIP
- [ ] é…ç½®å£“ç¸®é–¾å€¼
- [ ] æ¸¬è©¦å£“ç¸®æ€§èƒ½å½±éŸ¿

---

### 16. å‰ç«¯æ”¹é€²

#### a) éŒ¯èª¤è™•ç†

**éœ€è¦æ”¹é€²**ï¼š
- [ ] WebSocket éŒ¯èª¤é‡è©¦
- [ ] ç¶²çµ¡æ–·ç·šæç¤º
- [ ] ç”¨æˆ¶å‹å¥½çš„éŒ¯èª¤æ¶ˆæ¯
- [ ] éŒ¯èª¤æ—¥èªŒä¸Šå ±

---

#### b) æ€§èƒ½å„ªåŒ–

**åƒè€ƒæ–‡æª”**ï¼š`js/PERFORMANCE_OPTIMIZATIONS.md`

**æ”¹é€²æ¸…å–®**ï¼š
- [ ] Canvas é›¢å±æ¸²æŸ“
- [ ] å°è±¡æ± ç®¡ç†
- [ ] ç²¾éˆåœ–ï¼ˆSprite Sheetï¼‰
- [ ] é™ä½ç¹ªè£½é »ç‡ï¼ˆæ ¹æ“š FPSï¼‰
- [ ] ä½¿ç”¨ Web Workerï¼ˆè¨ˆç®—å¯†é›†ä»»å‹™ï¼‰

---

#### c) ç”¨æˆ¶é«”é©—

**æ”¹é€²å»ºè­°**ï¼š
- [ ] åŠ è¼‰å‹•ç•«ï¼ˆLoadingï¼‰
- [ ] å¹³æ»‘éæ¸¡æ•ˆæœ
- [ ] éŸ³æ•ˆæ”¯æŒ
- [ ] ç‰¹æ•ˆå‹•ç•«ï¼ˆçˆ†ç‚¸ã€æ°´æ³¢ï¼‰
- [ ] è§¸æ§è¨­å‚™æ”¯æŒ

---

### 17. é…ç½®ç®¡ç†

#### ç•¶å‰å•é¡Œï¼š

```
configs/
â”œâ”€â”€ config.yaml          # ä¸»é…ç½®
â”œâ”€â”€ config.dev.yaml      # âŒ ç¼ºå°‘é–‹ç™¼ç’°å¢ƒé…ç½®
â”œâ”€â”€ config.prod.yaml     # âŒ ç¼ºå°‘ç”Ÿç”¢ç’°å¢ƒé…ç½®
â””â”€â”€ config.test.yaml     # âŒ ç¼ºå°‘æ¸¬è©¦ç’°å¢ƒé…ç½®
```

**æ”¹é€²å»ºè­°**ï¼š
- [ ] å‰µå»ºå¤šç’°å¢ƒé…ç½®æ–‡ä»¶
- [ ] ç’°å¢ƒè®Šæ•¸è¦†è“‹æ©Ÿåˆ¶
- [ ] é…ç½®é©—è­‰ï¼ˆå•Ÿå‹•æ™‚æª¢æŸ¥ï¼‰
- [ ] é…ç½®ç†±é‡è¼‰ï¼ˆå¯é¸ï¼‰
- [ ] æ•æ„Ÿé…ç½®åŠ å¯†

---

### 18. éƒ¨ç½²èˆ‡é‹ç¶­

#### a) Docker å„ªåŒ–

**æ”¹é€²å»ºè­°**ï¼š
- [ ] å¤šéšæ®µæ§‹å»ºï¼ˆæ¸›å°é¡åƒå¤§å°ï¼‰
- [ ] ä½¿ç”¨é root ç”¨æˆ¶é‹è¡Œ
- [ ] å¥åº·æª¢æŸ¥ï¼ˆHealth Checkï¼‰
- [ ] å„ªé›…é—œé–‰æ”¯æŒ
- [ ] è³‡æºé™åˆ¶é…ç½®

---

#### b) ç›£æ§å’Œæ—¥èªŒ

**æ”¹é€²å»ºè­°**ï¼š
- [ ] Prometheus æŒ‡æ¨™å°å‡º
- [ ] Grafana å„€è¡¨æ¿
- [ ] æ—¥èªŒèšåˆï¼ˆELK/Lokiï¼‰
- [ ] åˆ†å¸ƒå¼è¿½è¹¤ï¼ˆJaegerï¼‰
- [ ] å‘Šè­¦é…ç½®ï¼ˆAlertManagerï¼‰

---

### 19. æ–‡æª”æ”¹é€²

#### ç¼ºå°‘çš„æ–‡æª”ï¼š

- [ ] API æ¥å£æ–‡æª”ï¼ˆä½¿ç”¨ Swaggerï¼‰
- [ ] æ¶æ§‹æ±ºç­–è¨˜éŒ„ï¼ˆADRï¼‰
- [ ] éƒ¨ç½²æŒ‡å—ï¼ˆç”Ÿç”¢ç’°å¢ƒï¼‰
- [ ] æ•…éšœæ’æŸ¥æ‰‹å†Š
- [ ] é–‹ç™¼è€…ä¸Šæ‰‹æŒ‡å—

---

### 20. CI/CD Pipeline

#### ç•¶å‰ç‹€æ…‹ï¼š
- âŒ ç„¡ CI/CD é…ç½®

**éœ€è¦å¯¦ç¾**ï¼š
- [ ] GitHub Actions é…ç½®
- [ ] è‡ªå‹•åŒ–æ¸¬è©¦ï¼ˆå–®å…ƒæ¸¬è©¦ + é›†æˆæ¸¬è©¦ï¼‰
- [ ] ä»£ç¢¼è¦†è“‹ç‡å ±å‘Š
- [ ] è‡ªå‹•åŒ–æ§‹å»º
- [ ] è‡ªå‹•åŒ–éƒ¨ç½²ï¼ˆå¯é¸ï¼‰
- [ ] ä¾è³´å®‰å…¨æƒæ

---

### 21. å®‰å…¨åŠ å›º

#### éœ€è¦æ”¹é€²çš„å®‰å…¨å•é¡Œï¼š

**a) SQL æ³¨å…¥é˜²è­·**
- âœ… å¤§éƒ¨åˆ†ä½¿ç”¨åƒæ•¸åŒ–æŸ¥è©¢
- âš ï¸ éœ€å…¨é¢å¯©æŸ¥

**b) XSS é˜²è­·**
- âš ï¸ å‰ç«¯éœ€è¦è¼¸å…¥éæ¿¾
- [ ] å¯¦ç¾ HTML è½‰ç¾©

**c) CSRF é˜²è­·**
- âŒ Admin API ç„¡ CSRF Token
- [ ] å¯¦ç¾ CSRF ä¸­é–“ä»¶

**d) é€Ÿç‡é™åˆ¶**
- âŒ WebSocket ç„¡é€Ÿç‡é™åˆ¶
- âŒ HTTP API ç„¡é€Ÿç‡é™åˆ¶
- [ ] å¯¦ç¾å…¨å±€é€Ÿç‡é™åˆ¶

**e) è¼¸å…¥é©—è­‰**
- âš ï¸ éƒ¨åˆ†æ¥å£ç¼ºå°‘é©—è­‰
- [ ] ä½¿ç”¨ validator çµ±ä¸€é©—è­‰

---

### 22. æ€§èƒ½æ¸¬è©¦

#### éœ€è¦é€²è¡Œçš„æ¸¬è©¦ï¼š

**a) å£“åŠ›æ¸¬è©¦**
- [ ] WebSocket é€£æ¥æ•¸æ¸¬è©¦ï¼ˆç›®æ¨™ï¼š1000+ ä½µç™¼ï¼‰
- [ ] HTTP API ååé‡æ¸¬è©¦
- [ ] æ•¸æ“šåº«æŸ¥è©¢æ€§èƒ½æ¸¬è©¦

**b) è² è¼‰æ¸¬è©¦**
- [ ] å¤šæˆ¿é–“åŒæ™‚é‹è¡Œ
- [ ] å¤§é‡é­šç¾¤ç”Ÿæˆ
- [ ] é«˜é »ç‡å­å½ˆç™¼å°„

**c) å…§å­˜æ´©æ¼æ¸¬è©¦**
- [ ] é•·æ™‚é–“é‹è¡Œæ¸¬è©¦ï¼ˆ24å°æ™‚+ï¼‰
- [ ] å…§å­˜ä½¿ç”¨ç›£æ§
- [ ] Goroutine æ´©æ¼æª¢æ¸¬

---

### 23. ä»£ç¢¼è³ªé‡

#### éœ€è¦æ”¹é€²ï¼š

**a) è¶…å¤§æ–‡ä»¶**
```
internal/data/wallet_repo.go - 17,764è¡Œ âš ï¸ å»ºè­°æ‹†åˆ†
```

**æ”¹é€²å»ºè­°**ï¼š
- [ ] æ‹†åˆ†ç‚ºå¤šå€‹æ–‡ä»¶
- [ ] æŒ‰åŠŸèƒ½çµ„ç¹”ï¼ˆdeposit.go, withdraw.go, transaction.goï¼‰

**b) éŒ¯èª¤è™•ç†**
- [ ] çµ±ä¸€éŒ¯èª¤ç¢¼
- [ ] éŒ¯èª¤æ—¥èªŒä¸Šä¸‹æ–‡
- [ ] å‹å¥½çš„éŒ¯èª¤æ¶ˆæ¯

**c) è¨»é‡‹å’Œæ–‡æª”**
- [ ] ç‚ºæ‰€æœ‰å…¬é–‹å‡½æ•¸æ·»åŠ è¨»é‡‹
- [ ] ä½¿ç”¨ godoc ç”Ÿæˆæ–‡æª”
- [ ] æ·»åŠ ä½¿ç”¨ç¯„ä¾‹

---

## ğŸ“… å»ºè­°çš„å¯¦æ–½é †åº

### Phase 1: ç·Šæ€¥ä¿®å¾©ï¼ˆ1-2é€±ï¼‰

1. âœ… **Admin API èº«ä»½é©—è­‰**ï¼ˆæœ€é«˜å„ªå…ˆç´š - å®‰å…¨å•é¡Œï¼‰
2. âœ… **æ¸¬è©¦æ¶æ§‹ä¿®å¾©**ï¼ˆè®“æ¸¬è©¦å¯ä»¥é‹è¡Œï¼‰
3. âœ… **ç§»é™¤éŒ¯èª¤çš„ TODO æ¨™è¨˜**ï¼ˆæ¸…ç†æŠ€è¡“å‚µå‹™ï¼‰
4. âœ… **æˆ¿é–“åº§ä½é¸æ“‡åŠŸèƒ½æ¢å¾©**ï¼ˆå¿«é€Ÿå‹åˆ©ï¼‰

### Phase 2: æ ¸å¿ƒåŠŸèƒ½å®Œå–„ï¼ˆ2-4é€±ï¼‰

5. âœ… **é­šæ½®ç³»çµ±å¯¦ç¾**ï¼ˆé‡è¦åŠŸèƒ½ï¼‰
6. âœ… **OAuth ç™»éŒ„ç³»çµ±**ï¼ˆç”¨æˆ¶é«”é©—ï¼‰
7. âœ… **å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡æå‡**ï¼ˆè³ªé‡ä¿è­‰ï¼‰
8. âœ… **æ€§èƒ½å„ªåŒ– - å¿«å–å¯¦ç¾**ï¼ˆæ€§èƒ½æå‡ï¼‰

### Phase 3: åŠŸèƒ½å¢å¼·ï¼ˆ1-2å€‹æœˆï¼‰

9. âœ… **æ’è¡Œæ¦œç³»çµ±**
10. âœ… **ç©å®¶æˆå°±ç³»çµ±**
11. âœ… **æ›´å¤šé­šç¨®å’Œ BOSS**
12. âœ… **å‰ç«¯æ€§èƒ½å„ªåŒ–**

### Phase 4: æ¶æ§‹æ”¹é€²ï¼ˆ1-2å€‹æœˆï¼‰

13. âœ… **äº‹ä»¶é©…å‹•æ¶æ§‹**
14. âœ… **ä¸­é–“ä»¶å¢å¼·**
15. âœ… **ç›£æ§å’Œæ—¥èªŒç³»çµ±**
16. âœ… **CI/CD Pipeline**

### Phase 5: é•·æœŸè¦åŠƒï¼ˆ2-3å€‹æœˆï¼‰

17. âœ… **æ°´å¹³æ“´å±•æ”¯æŒ**
18. âœ… **è§€æˆ°æ¨¡å¼**
19. âœ… **éŒ„åƒå›æ”¾åŠŸèƒ½**
20. âœ… **AI ç©å®¶**

---

## ğŸ“Š å·¥ä½œé‡ä¼°ç®—ç¸½çµ

| éšæ®µ | é …ç›®æ•¸ | ä¼°è¨ˆå·¥ä½œé‡ | å„ªå…ˆç´š |
|------|--------|------------|--------|
| Phase 1 | 4 | 3-5 å¤© | ğŸ”´ Critical |
| Phase 2 | 4 | 12-20 å¤© | ğŸ”´ High |
| Phase 3 | 4 | 20-40 å¤© | ğŸŸ¡ Medium |
| Phase 4 | 4 | 20-40 å¤© | ğŸŸ¡ Medium |
| Phase 5 | 4 | 40-60 å¤© | ğŸŸ  Low |
| **ç¸½è¨ˆ** | **20+** | **95-165 å¤©** | - |

**å‚™è¨»**ï¼š
- ä»¥ä¸Šä¼°ç®—åŸºæ–¼å–®äººå…¨è·é–‹ç™¼
- å¯¦éš›å·¥ä½œé‡å¯èƒ½å› é–‹ç™¼è€…ç¶“é©—è€Œç•°
- å»ºè­°æŒ‰éšæ®µé€æ­¥å¯¦æ–½ï¼Œä¸è¦åŒæ™‚é€²è¡Œæ‰€æœ‰é …ç›®

---

## ğŸ¯ é—œéµç¸¾æ•ˆæŒ‡æ¨™ï¼ˆKPIï¼‰

### ä»£ç¢¼è³ªé‡

- [ ] æ¸¬è©¦è¦†è“‹ç‡ > 80%
- [ ] æ‰€æœ‰ Critical å’Œ High TODO å·²å®Œæˆ
- [ ] Linter é›¶è­¦å‘Š
- [ ] ç„¡å·²çŸ¥å®‰å…¨æ¼æ´

### æ€§èƒ½æŒ‡æ¨™

- [ ] WebSocket ä½µç™¼é€£æ¥ > 1000
- [ ] å¹³å‡éŸ¿æ‡‰æ™‚é–“ < 50ms
- [ ] 99th ç™¾åˆ†ä½éŸ¿æ‡‰æ™‚é–“ < 200ms
- [ ] CPU ä½¿ç”¨ç‡ < 70%ï¼ˆæ­£å¸¸è² è¼‰ï¼‰
- [ ] å…§å­˜ä½¿ç”¨ç©©å®šï¼ˆç„¡æ´©æ¼ï¼‰

### åŠŸèƒ½å®Œæ•´æ€§

- [ ] æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å¯ç”¨ï¼ˆç„¡ panicï¼‰
- [ ] ç¬¬ä¸‰æ–¹ç™»éŒ„æ”¯æŒï¼ˆGoogle/Facebook/QQï¼‰
- [ ] é­šæ½®ç³»çµ±å®Œå…¨é‹ä½œ
- [ ] Admin API æœ‰èº«ä»½é©—è­‰ä¿è­·

---

## ğŸ“ è¯çµ¡èˆ‡æ”¯æŒ

å¦‚æœ‰ä»»ä½•å•é¡Œæˆ–éœ€è¦å”åŠ©å¯¦æ–½é€™äº›æ”¹é€²ï¼Œè«‹ï¼š

1. æŸ¥é–±å°ˆæ¡ˆæ–‡æª”ï¼š`CLAUDE.md`, `docs/`
2. æŸ¥çœ‹ç‰¹å®šæ¨¡å¡ŠæŒ‡å—ï¼š
   - `docs/FISH_FORMATION_GUIDE.md`
   - `docs/FRONTEND_FISH_DYNAMICS_GUIDE.md`
   - `docs/TESTING_FRAMEWORK.md`
3. æäº¤ Issue æˆ– Pull Request

---

**æœ€å¾Œæ›´æ–°**ï¼š2025-11-17
**æ–‡æª”ç‰ˆæœ¬**ï¼šv1.0
**å¯©æŸ¥è€…**ï¼šClaude Code Agent
